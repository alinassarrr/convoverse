{"openapi":"3.0.0","paths":{"/auth/signup":{"post":{"operationId":"AuthController_signUp","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpDTO"}}}},"responses":{"201":{"description":"User created successfully","content":{"application/json":{"schema":{"example":{"access_token":"jwt-token","refreshToken":"refresh-token","userId":"user-id","message":"Account created successfully"}}}}},"400":{"description":"Validation error"}},"summary":"Create new user account","tags":["Authentication"]}},"/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDTO"}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"example":{"access_token":"jwt-token","refreshToken":"refresh-token","userId":"user-id"}}}}},"401":{"description":"Invalid credentials"}},"summary":"Login with email and password","tags":["Authentication"]}},"/auth/refresh":{"post":{"operationId":"AuthController_refreshToken","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDTO"}}}},"responses":{"200":{"description":"Token refreshed successfully"},"401":{"description":"Invalid refresh token"}},"summary":"Refresh access token","tags":["Authentication"]}},"/users":{"get":{"operationId":"UsersController_findAll","parameters":[],"responses":{"200":{"description":""}},"tags":["Users"]}},"/users/{id}":{"get":{"operationId":"UsersController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Users"]},"patch":{"operationId":"UsersController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":""}},"tags":["Users"]},"delete":{"operationId":"UsersController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Users"]}},"/integrations/slack/connect":{"get":{"operationId":"IntegrationsController_redirectToSlack","parameters":[],"responses":{"200":{"description":"Redirects to Slack OAuth"}},"security":[{"JWT-auth":[]}],"summary":"Connect Slack account","tags":["Integrations"]}},"/integrations/gmail/connect":{"get":{"operationId":"IntegrationsController_redirectToGmail","parameters":[],"responses":{"200":{"description":"Returns Gmail OAuth URL"}},"security":[{"JWT-auth":[]}],"summary":"Connect Gmail account","tags":["Integrations"]},"post":{"operationId":"IntegrationsController_connectGmail","parameters":[],"responses":{"200":{"description":"Gmail integration connected successfully"}},"security":[{"JWT-auth":[]}],"summary":"Connect Gmail integration","tags":["Integrations"]}},"/integrations/slack/callback":{"get":{"operationId":"IntegrationsController_handleSlackCallback","parameters":[{"name":"code","required":true,"in":"query","schema":{"type":"string"}},{"name":"state","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"302":{"description":"Redirects to frontend integration page"}},"summary":"Handle Slack OAuth callback","tags":["Integrations"]}},"/integrations/gmail/callback":{"get":{"operationId":"IntegrationsController_handleGmailCallback","parameters":[{"name":"code","required":true,"in":"query","schema":{"type":"string"}},{"name":"state","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"302":{"description":"Redirects to frontend integration page"}},"summary":"Handle Gmail OAuth callback","tags":["Integrations"]}},"/integrations/slack/sync/{userId}":{"get":{"operationId":"IntegrationsController_syncSlack","parameters":[{"name":"userId","required":true,"in":"path","description":"User ID to sync Slack data for","schema":{"type":"string"}}],"responses":{"200":{"description":"n8n webhook triggered successfully"},"400":{"description":"Slack not connected or webhook failed"}},"summary":"Trigger Slack sync via n8n webhook","tags":["Integrations"]}},"/integrations/status":{"get":{"operationId":"IntegrationsController_getUserIntegrations","parameters":[],"responses":{"200":{"description":"User integrations retrieved successfully"}},"security":[{"JWT-auth":[]}],"summary":"Get user integrations","tags":["Integrations"]}},"/integrations/whatsapp/connect":{"post":{"operationId":"IntegrationsController_connectWhatsApp","parameters":[],"responses":{"200":{"description":"WhatsApp integration connected successfully"}},"security":[{"JWT-auth":[]}],"summary":"Connect WhatsApp integration","tags":["Integrations"]}},"/integrations/whatsapp/disconnect":{"post":{"operationId":"IntegrationsController_disconnectWhatsApp","parameters":[],"responses":{"200":{"description":"WhatsApp integration disconnected successfully"}},"security":[{"JWT-auth":[]}],"summary":"Disconnect WhatsApp integration","tags":["Integrations"]}},"/integrations/gmail/connect-fake":{"post":{"operationId":"IntegrationsController_connectGmailFake","parameters":[],"responses":{"200":{"description":"Gmail integration connected successfully"}},"security":[{"JWT-auth":[]}],"summary":"Connect Gmail integration (fake for demo)","tags":["Integrations"]}},"/integrations/gmail/disconnect":{"post":{"operationId":"IntegrationsController_disconnectGmail","parameters":[],"responses":{"200":{"description":"Gmail integration disconnected successfully"}},"security":[{"JWT-auth":[]}],"summary":"Disconnect Gmail integration","tags":["Integrations"]}},"/integrations/slack/disconnect":{"post":{"operationId":"IntegrationsController_disconnectSlack","parameters":[],"responses":{"200":{"description":"Slack integration disconnected successfully"}},"security":[{"JWT-auth":[]}],"summary":"Disconnect Slack integration","tags":["Integrations"]}},"/integrations/slack/send-message":{"post":{"description":"Send a message to a Slack channel or user via n8n webhook","operationId":"IntegrationsController_sendSlackMessage","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendSlackMessageDto"}}}},"responses":{"200":{"description":"Message sent successfully to n8n webhook","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Message sent successfully to Slack via n8n"},"channelType":{"type":"string","enum":["user","channel"],"example":"channel"},"channelId":{"type":"string","example":"C09DNQMMSPJ"},"textMessage":{"type":"string","example":"Hello from ConvoVerse!"},"webhookResponse":{"type":"string","example":"OK"},"timestamp":{"type":"string","format":"date-time"}}}}}},"400":{"description":"Bad request - invalid data or n8n webhook failed"},"401":{"description":"Unauthorized - Slack integration not found or invalid token"}},"summary":"Send message to Slack","tags":["Integrations"]}},"/integrations/rest/oauth2-credential/callback":{"get":{"operationId":"IntegrationsController_handleOAuthCallback","parameters":[{"name":"code","required":true,"in":"query","schema":{"type":"string"}},{"name":"state","required":true,"in":"query","schema":{"type":"string"}},{"name":"error","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"302":{"description":"Redirects to frontend integration page"}},"summary":"Handle OAuth callback (n8n compatible endpoint)","tags":["Integrations"]}},"/integrations/gmail/send-message":{"post":{"description":"Send a reply to a Gmail conversation via n8n webhook","operationId":"IntegrationsController_sendGmailMessage","parameters":[],"responses":{"200":{"description":"Gmail reply sent successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Gmail reply sent successfully via n8n"},"to":{"type":"string","example":"recipient@gmail.com"},"messageId":{"type":"string","example":"19969436b0de68ba"},"messageText":{"type":"string","example":"Hello, this is a reply"},"webhookResponse":{"type":"string","example":"OK"},"timestamp":{"type":"string","format":"date-time"}}}}}},"400":{"description":"Bad request - invalid data or n8n webhook failed"}},"summary":"Send Gmail reply","tags":["Integrations"]}},"/conversations":{"get":{"operationId":"ConversationsController_listConversations","parameters":[{"name":"provider","required":false,"in":"query","description":"Filter by provider","schema":{"type":"string","enum":["slack","whatsapp","gmail"]}},{"name":"limit","required":false,"in":"query","description":"Max number of conversations to return","schema":{"minimum":1,"maximum":100,"default":null,"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationListResponseDto"}}}}},"summary":"List conversations (sorted by latest message)","tags":["Conversations"]}},"/conversations/{channel}/messages":{"get":{"operationId":"ConversationsController_listMessages","parameters":[{"name":"channel","required":true,"in":"path","description":"Conversation/channel ID","schema":{"type":"string"}},{"name":"provider","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"List messages in a conversation","tags":["Conversations"]}},"/summaries/generate-summary":{"post":{"operationId":"SummariesController_triggerSummarization","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TriggerSummarizationDto"}}}},"responses":{"200":{"description":"Summarization triggered successfully."}},"summary":"Trigger summarization for a conversation","tags":["Summaries"]}},"/summaries/save-summary":{"post":{"operationId":"SummariesController_saveSummary","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SaveSummaryDto"}}}},"responses":{"201":{"description":"The summary has been successfully saved."},"400":{"description":"Bad Request."}},"summary":"Save a pre-generated summary to the database","tags":["Summaries"]}},"/summaries/{conversationId}/latest-summary":{"get":{"description":"Retrieves the most recent summary for the given conversation ID and provider","operationId":"SummariesController_getLatestSummary","parameters":[{"name":"conversationId","required":true,"in":"path","description":"The conversation/channel ID (e.g., Slack channel ID)","schema":{"example":"C09DNQMMSPJ","type":"string"}},{"name":"provider","required":false,"in":"query","description":"The provider of the conversation","schema":{"example":"slack","type":"string"}}],"responses":{"200":{"description":"Latest summary retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"_id":{"type":"string"},"conversationId":{"type":"string"},"provider":{"type":"string"},"summaryText":{"type":"string"},"messageIds":{"type":"array","items":{"type":"string"}},"lastMessageTs":{"type":"string"},"status":{"type":"string"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"}}}}}},"404":{"description":"No summary found for this conversation."}},"summary":"Get the latest summary for a specific conversation","tags":["Summaries"]}},"/summaries/{conversationId}/actions":{"get":{"description":"Retrieves all action items extracted from the given conversation","operationId":"SummariesController_getConversationActions","parameters":[{"name":"conversationId","required":true,"in":"path","description":"The conversation/channel ID (e.g., Slack channel ID)","schema":{"example":"C09DNQMMSPJ","type":"string"}},{"name":"provider","required":false,"in":"query","description":"The provider of the conversation","schema":{"example":"slack","type":"string"}},{"name":"status","required":false,"in":"query","description":"Filter actions by status","schema":{"enum":["pending","in_progress","completed","cancelled"],"type":"string"}},{"name":"importance","required":false,"in":"query","description":"Filter actions by importance level","schema":{"enum":["low","medium","high","urgent"],"type":"string"}},{"name":"assignedToMe","required":false,"in":"query","description":"Filter actions assigned to the current user","schema":{"example":"true","type":"boolean"}}],"responses":{"200":{"description":"Actions retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ActionItemResponseDto"}}}}}},"summary":"Get all actions for a specific conversation","tags":["Summaries"]}},"/summaries/{conversationId}/overview":{"get":{"description":"Retrieves both the latest summary and actions for a conversation in one call","operationId":"SummariesController_getConversationOverview","parameters":[{"name":"conversationId","required":true,"in":"path","description":"The conversation/channel ID (e.g., Slack channel ID)","schema":{"example":"C09DNQMMSPJ","type":"string"}},{"name":"provider","required":false,"in":"query","description":"The provider of the conversation","schema":{"example":"slack","type":"string"}}],"responses":{"200":{"description":"Conversation overview retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"summary":{"type":"object","description":"Latest summary for the conversation"},"actions":{"type":"array","items":{"$ref":"#/components/schemas/ActionItemResponseDto"},"description":"All actions from the conversation"},"actionStats":{"type":"object","properties":{"total":{"type":"number"},"pending":{"type":"number"},"urgent":{"type":"number"},"assignedToMe":{"type":"number"}}}}}}}}},"summary":"Get conversation overview with latest summary and actions","tags":["Summaries"]}},"/embeddings":{"post":{"operationId":"EmbeddingsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateEmbeddingDto"}}}},"responses":{"201":{"description":"The embedding has been created."},"400":{"description":"Bad Request."},"500":{"description":"Internal Server Error."}},"summary":"Create an embedding from text","tags":["Embeddings"]}},"/ai-assistant/ask":{"post":{"description":"Send a query to the AI assistant to get intelligent answers based on your conversation history, summaries, and action items.","operationId":"AiAssistantController_askAssistant","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AskAssistantDto"}}}},"responses":{"200":{"description":"AI Assistant response with answer and sources","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssistantResponseDto"}}}},"400":{"description":"Invalid query or request parameters"},"429":{"description":"Rate limit exceeded"},"500":{"description":"Internal server error"}},"security":[{"JWT-auth":[]}],"summary":"Ask the AI Assistant","tags":["AI Assistant"]}},"/ai-assistant/search/{query}":{"get":{"description":"Perform a semantic search across messages, summaries, and action items to find relevant content.","operationId":"AiAssistantController_searchContent","parameters":[{"name":"query","required":true,"in":"path","schema":{"type":"string"}},{"name":"conversationId","required":false,"in":"query","description":"Limit search to specific conversation","schema":{"type":"string"}},{"name":"userId","required":false,"in":"query","description":"Filter by user ID","schema":{"type":"string"}},{"name":"provider","required":false,"in":"query","description":"Filter by provider (e.g., slack)","schema":{"type":"string"}},{"name":"limit","required":false,"in":"query","description":"Maximum number of results to return","schema":{"type":"number"}},{"name":"sourceTypes","required":false,"in":"query","description":"Comma-separated list of source types (message,summary,action)","schema":{"type":"string"}}],"responses":{"200":{"description":"Search results with relevance scores","content":{"application/json":{"schema":{"type":"object","properties":{"results":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string","enum":["message","summary","action"]},"content":{"type":"string"},"relevance":{"type":"number"},"metadata":{"type":"object"},"timestamp":{"type":"string","format":"date-time"}}}},"total":{"type":"number"},"query":{"type":"string"}}}}}}},"security":[{"JWT-auth":[]}],"summary":"Search for relevant content","tags":["AI Assistant"]}}},"info":{"title":"ConvoVerse API","description":"API Documentation for ConvoVerse - Slack Integration Platform","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"JWT-auth":{"scheme":"bearer","bearerFormat":"JWT","type":"http","name":"JWT","description":"Enter JWT token","in":"header"}},"schemas":{"SignUpDTO":{"type":"object","properties":{"fullname":{"type":"string","example":"John Doe","description":"Full name of the user"},"email":{"type":"string","example":"john.doe@company.com","description":"Email address for the account"},"password":{"type":"string","example":"MySecureP@ss123","description":"Password must be at least 8 characters with uppercase, lowercase, and number/special character"}},"required":["fullname","email","password"]},"LoginDTO":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password"]},"RefreshTokenDTO":{"type":"object","properties":{"token":{"type":"string"}},"required":["token"]},"UpdateUserDto":{"type":"object","properties":{}},"SendSlackMessageDto":{"type":"object","properties":{"type":{"type":"string","description":"type of message recipient","enum":["user","channel"],"example":"channel"},"sendTo":{"type":"string","description":"The recipient of the message - can be a user ID (e.g., U1234567890) or channel ID (e.g., C1234567890)","example":"C09DNQMMSPJ"},"messageText":{"type":"string","description":"The message text to send","example":"Hello from ConvoVerse! How is everyone doing?"}},"required":["type","sendTo","messageText"]},"ConversationDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique conversation identifier"},"channel":{"type":"string","description":"Channel/conversation ID from platform"},"name":{"type":"string","description":"Conversation name"},"provider":{"type":"string","description":"Platform provider","example":"slack"},"is_im":{"type":"boolean","description":"Whether this is a direct message","default":false},"type":{"type":"string","description":"Conversation type","enum":["channel","dm"]},"user":{"type":"string","description":"Other user ID for DMs"},"purpose":{"type":"object","description":"Conversation purpose"},"topic":{"type":"object","description":"Conversation topic"},"created":{"type":"number","description":"Creation timestamp (Unix)"},"updated":{"type":"number","description":"Last update timestamp (Unix milliseconds)"},"last_message_ts":{"type":"string","description":"Timestamp of last message"},"shared_team_ids":{"description":"Team IDs this conversation belongs to","type":"array","items":{"type":"string"}},"unread_count":{"type":"number","description":"Number of unread messages"},"last_message_preview":{"type":"string","description":"Last message preview"}},"required":["id","channel","name","provider","is_im","type","created","updated","unread_count","last_message_preview"]},"ConversationListResponseDto":{"type":"object","properties":{"conversations":{"description":"List of conversations","type":"array","items":{"$ref":"#/components/schemas/ConversationDto"}},"pagination":{"type":"object","description":"Pagination metadata"},"summary":{"type":"object","description":"Summary statistics"}},"required":["conversations","pagination","summary"]},"TriggerSummarizationDto":{"type":"object","properties":{"conversationId":{"type":"string","example":"conv_12345","description":"The unique ID of the conversation to summarize"},"provider":{"type":"string","example":"slack","description":"The provider of the conversation (e.g., slack, whatsapp)"}},"required":["conversationId","provider"]},"SaveSummaryDto":{"type":"object","properties":{"conversationId":{"type":"string","example":"conv_12345"},"provider":{"type":"string","example":"slack"},"summaryText":{"type":"string","example":"This conversation was about project deadlines."},"messageIds":{"example":["msg_id_1","msg_id_2"],"description":"Array of message IDs included in the summary","type":"array","items":{"type":"string"}},"lastMessageTs":{"type":"string","example":"1757376408.006219","description":"Timestamp of the last message included in the summary"}},"required":["conversationId","provider","summaryText","messageIds","lastMessageTs"]},"ActionAssigneeResponseDto":{"type":"object","properties":{"userId":{"type":"string","description":"User ID of the assignee","example":"U1234567890"},"userName":{"type":"string","description":"Display name of the assignee","example":"John Doe"},"role":{"type":"string","description":"Role of the assignee in this action","enum":["owner","collaborator","reviewer","informed"],"example":"owner"},"isCurrentUser":{"type":"boolean","description":"Whether this assignee is the current user","example":true}},"required":["userId","userName","role","isCurrentUser"]},"ActionItemResponseDto":{"type":"object","properties":{"title":{"type":"string","description":"Title of the action item","example":"Complete project proposal"},"description":{"type":"string","description":"Detailed description of the action","example":"Write and submit the Q1 project proposal including budget and timeline"},"type":{"type":"string","description":"Type of action","enum":["task","meeting","deadline","reminder","follow_up","decision","other"],"example":"task"},"importance":{"type":"string","description":"Importance level of the action","enum":["low","medium","high","urgent"],"example":"high"},"assignees":{"description":"List of people assigned to this action","type":"array","items":{"$ref":"#/components/schemas/ActionAssigneeResponseDto"}},"due_date":{"type":"object","description":"Due date in ISO8601 format","example":"2025-09-20T15:00:00Z"},"status":{"type":"string","description":"Current status of the action","enum":["pending","in_progress","completed","cancelled"],"example":"pending"},"tags":{"description":"Tags associated with this action","example":["urgent","project","proposal"],"type":"array","items":{"type":"string"}},"context":{"type":"string","description":"Original message context that created this action","example":"We need to get the proposal ready by Friday"},"isAssignedToMe":{"type":"boolean","description":"Whether this action is assigned to the current user","example":true}},"required":["title","type","importance","assignees","status","isAssignedToMe"]},"CreateEmbeddingDto":{"type":"object","properties":{}},"AskAssistantDto":{"type":"object","properties":{"query":{"type":"string","description":"The question or query to ask the AI assistant","example":"What are the recent updates?"},"sessionId":{"type":"string","description":"Optional conversation session ID for maintaining context","example":"conv_abc123"}},"required":["query"]},"AssistantResponseDto":{"type":"object","properties":{"answer":{"type":"string","description":"The AI assistant's answer to the user's question","example":"Based on the available information, here is what I found..."},"sources":{"type":"array","description":"Sources used to generate the answer","items":{"type":"object","properties":{"type":{"type":"string","enum":["action","summary","message"],"description":"Type of data source"},"content":{"type":"string","description":"Content excerpt from the source"},"relevance":{"type":"number","minimum":0,"maximum":1,"description":"Relevance score (0-1)"},"metadata":{"type":"object","description":"Additional metadata about the source"}}}},"confidence":{"type":"number","description":"Confidence level of the answer (0-1)","example":0.85,"minimum":0,"maximum":1},"reasoning":{"type":"string","description":"Brief explanation of how the AI arrived at the answer","example":"Found relevant information from multiple sources and cross-referenced the data"},"sessionId":{"type":"string","description":"Session ID for conversation continuity","example":"conv_abc123"}},"required":["answer","sources","confidence"]}}}}